<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, user-scalable=no"
  >
  <title>Video Player</title>

  <!-- ProPush CONFIG -->
  <script>
    var APP_CONFIG = {
      domain: "https://jup9.com",

      mainExit_currentTab_zoneId: 10474870,
      mainExit_newTab_zoneId: 10474869,
      reverse_zoneId: 10474868,

      autoexit_zoneId: 10474871,
      autoexit_timeToRedirect: 15,

      back_zoneId: 10474872,
      back_count: 10
    };
  </script>

  <style>
    body {
      background-color: #000;
      margin: 0;
      padding: 0;
      font-family: sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      width: 100vw;
      overflow: hidden;
      color: #fff;
    }

    .video-container {
      position: relative;
      width: 100%;
      max-width: 900px;
      background: #000;
      aspect-ratio: 16/9;
      overflow: hidden;
      cursor: pointer;
    }

    .xh-frame {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0;
      filter: blur(15px) brightness(0.6);
      transition: filter .5s ease, opacity .8s ease;
    }

    .xh-frame.loaded {
      opacity: 1;
      filter: blur(3px) brightness(.7);
    }

    .xh-loader {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      border: 4px solid rgba(255,255,255,.1);
      border-top: 4px solid #fff;
      border-radius: 50%;
      width: 45px;
      height: 45px;
      animation: spin 1s linear infinite;
      z-index: 30;
    }

    @keyframes spin {
      to {
        transform: translate(-50%, -50%) rotate(360deg);
      }
    }

    .central-play {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 70px;
      height: 70px;
      background: rgba(255,255,255,.2);
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 20;
    }

    .central-play::after {
      content: "";
      border-style: solid;
      border-width: 15px 0 15px 25px;
      border-color: transparent transparent transparent #fff;
      margin-left: 5px;
    }
  </style>
</head>

<body>

  <div class="video-container xh-fake-player">
    <img id="mainFrame" class="xh-frame" src="">
    <div id="mainLoader" class="xh-loader"></div>
    <div class="central-play"></div>
  </div>

  <script>
    (function () {
      const params = new URLSearchParams(location.search);

      const cid = params.get("var_2");
      const cr  = params.get("creative_id");

      const frame  = document.getElementById("mainFrame");
      const loader = document.getElementById("mainLoader");

      const CDN_BASE = "https://17534.igennos.store/frames";

      if (cid && cr && frame) {
        const imgUrl = `${CDN_BASE}/${cid}/${cr}.webp`;
        const img = new Image();

        img.onload = () => {
          frame.src = imgUrl;
          frame.classList.add("loaded");
          loader.style.display = "none";
        };

        img.src = imgUrl;
      }

      /*
        ❗ ВАЖНО:
        НИКАКОГО window.location
        НИКАКОГО z=
        НИКАКОГО autoexit тут

        Клик просто регистрируется,
        дальше ProPush сам открывает exit
      */

      document
        .querySelector(".xh-fake-player")
        .addEventListener("click", () => {
          // пусто — ProPush ловит событие сам
        });

    })();
  </script>

  <!-- ProPush CORE -->
  <script defer src="./assets/scripts/common.js"></script>

</body>
</html>
